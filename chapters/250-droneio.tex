\section{Drone}
    Drone je minimalistické \CI postavené na kontejnerech. Je to svým způsobem jenom Docker orchestrátor, který má navíc drobné webové rozhraní. V \glstext{UI} lze dělat pouze dva úkony: číst výstup jobů a zapínat/vypínat sledování repozitářů. Kromě toho je celý web implementovaný jako \glstext{SPA}. To má sice pozitivní vliv na rychlost přepínání stránek, ale při testování občas aplikace nereagovala a několikrát se zasekla úplně. Dokonce ve webové administraci není ani seznam agentů, joby čekající na zpracování a podobně.

    Některé důležité funkce skrývá Drone za placenou licenci. Nejde ani o korporátní podporu, ale o nezbytné vlastnosti bez který lze \CI těžko provozovat. Mezi ně patří: dynamický runner, který by umožňoval využívat cluster nebo externí služby (například \glstext{AWS} CodeBuild) podle vytížení; sdílení tajemství napříč organizací a obecně podpora pro externí správce tajemství; šablony pro pipeline.

    \subsection{Architektura Drone, možnosti konfigurace}
        Dokumentace Drone je dostatečně obsáhlá, ale není vyčerpávající a odkazy jsou navíc netypicky pojmenované. Instalace je rozdělena podle externího správce úložišť, tradičně bývá odlišná dokumentace pro způsoby instalace (bare metal, kontejnery, \ldots). Není možné v jedné Drone instanci využívat zároveň například GitLab a Bitbucket, podporováno je pouze jedno úložiště. Dokumentační stránka o instalaci na Kubernetes je dokonce úplně špatně. Doporučuje spouštět Drone server jako \code{Pod} (mělo by jít o \code{Deployment}, nebo Helm chart) a agenti dokonce naprosto chybí.

        Stejně jako ostatní \CI se Drone skládá z jednoho masteru a agentů. Master persistuje data do sqlite databáze, ale některá data o frontě požadavků udržuje pouze v paměti \cite{drone-ha}. Nemá žádné externí závilosti.

    \subsection{Rozšiřitelnost}
        Drone rozlišuje dva koncepty. První jsou \textit{pipeline plugins}, což jsou obyčejné kontejnery spuštěné v pipeline. Jediný rozdíl je drobné syntaktické zjednodušení, které umožňuje v konfiguraci pipeline psát místo \code{environment[PLUGIN\_KEY]=x} jenom \code{settings.key=x}. Kdyby Drone tuto funkci neměl, byla by tvorba pluginů transparentnější a přístupnější i těm nejméně zkušeným uživatelům.

        Druhý koncept rozšíření -- dostupný pouze v placené Enterprise verzi -- upravuje nějakým způsobem definici pipeline. Jediné zdokumentované rozšíření je zatím Jsonnet, které umožňuje používat stejnojmenný šablonovací jazyk místo \glstext{YAML} \cite{drone-jsonnet}.

    \subsection{Zabezpečení}
        Díky kontejnerové architektuře má Drone základní izolaci i v rámci jednoho agenta. Lepší izolace lze dosáhnout v placené verzi, která nabízí dynamické agenty, které můžou spouštět \glstext{VM} nebo nějakým způsobem využívat cloud.

        Vynikající vlastnost kterou ostatní v základu \CI nenabízejí je možnost zašifrovat tajemství a umístit ho do veřejně čitelné pipeline. Využívá se k tomu asymetrické šifrování, při kterém \CI nikdy nezveřejňuje svůj privátní klíč. Dál je podporován mj.~HashiCorp Vault a \glstext{AWS} Secrets Manager.

        Při napojení na GitHub je vyžadováno moc práv, včetně čtení a zápisu do všech soukromých repozitářů. Je na to otevřené issue od začátku roku 2018, ale Drone je zatím bez opravy \cite{drone-github-acl}.

        Nenašel jsem žádná Drone \glstext{CVE}, ani jsem nenašel žádné zdokumentované bezpečnostní problémy ve veřejném seznamu chyb a úkolů celé Drone organizace (ať otevřené, nebo vyřešené).

    \subsection{Dostupnost}
        Podobně jako ostatní \CI má Drone jeden stavový master, který není možné load balancovat. Jeden z autorů prohlásil, že na stabilním cloudu má Drone uptime $99,999$ \cite{drone-ha}. Nemůže ale zahrnovat aktualizace. Kromě toho s nástupem smýšlení \textit{infrastructure as a code} není běžné udržovat dlouhožijící \textit{pet} servery.

        \todo{Jak se dělá upgrade? Jak stabilní to je?}\blind[1]
        \todo{Jak se dělá backup/restore}\blind[1]

    \subsection{Integrace}
        Drone podporuje jenom vybrané správce repozitářů: GitHub, Gitlab, Bitbucket, Gitea a Gogs. Důležité je, že neexistuje podpora pro obecný git remote.

        Ani přes úzkou integraci na repozitáře není ale výsledná integrace bezchybná. Například oznámení výsledku pipeline na GitHub (tzv. \textit{Commit Status} nebo novější \textit{Checks}) nejsou zabudované a je nutné použít plugin, což dále komplikuje pipeline kterou uživatel musí napsat a udržovat.

        \todo{Možnosti deploy z Drone do cílového systému; k8s, sftp, openstack, \ldots}\blind[1]

    \subsection{Praktické nasazení projektů}
        \subsubsection{Projekt 1}
            pri pullovani docker image neni v adminu videt co se deje
            v dokumentaci neuvadi verze ale doporucuji je je pouzivat, wtf
            \todo{Popsat deploy projektu 1 z Drone}\blind[2]

        \subsubsection{Projekt 2}
            \todo{Popsat deploy projektu 2 z Drone}\blind[2]

        \subsubsection{Projekt 3}
            \todo{Popsat deploy projektu 3 z Drone}\blind[2]
